# Trino Teradata Export Connector - Catalog Properties
#
# This file should be placed in Trino's catalog configuration directory
# (typically /etc/trino/catalog/ or $TRINO_HOME/etc/catalog/)
#
# Save as: tdexport.properties

# Connector name - must match the plugin name
connector.name=teradata-export

# ============================================================
# Teradata Connection Settings
# ============================================================

teradata.url=jdbc:teradata://192.168.137.128/DATABASE=TrinoExport
teradata.user=sysdba
teradata.password=sysdba

# Teradata server timezone offset (for TIME/TIMESTAMP conversion)
# Format: +/-HH:MM (e.g., -05:00 for EST, +08:00 for SGT)
teradata.timezone=-05:00

# ============================================================
# Network/Port Settings
# ============================================================

# Arrow Flight server port (for gRPC-based data transfer)
teradata.export.flight-port=50051

# Arrow Flight server bind address (network interface)
# Use 0.0.0.0 to listen on all interfaces
teradata.export.flight-bind-address=0.0.0.0

# Java Bridge server port (for direct TCP connections from Teradata AMPs)
teradata.export.bridge-port=9999

# Trino coordinator/worker address (used in single-worker mode)
# In multi-worker mode, actual worker addresses are automatically discovered
teradata.export.trino-address=172.27.251.157

# Worker advertised addresses for NAT/multi-homed networks (optional)
# Use this when Teradata cannot reach workers via internal hostnames
# Format: ip1:port,ip2:port,ip3:port
# If not set, worker IPs are auto-discovered from NodeManager
teradata.export.worker-advertised-addresses=172.27.251.157:9999

# ============================================================
# Buffer/Performance Settings
# ============================================================

# TCP socket receive buffer size in bytes (default: 4MB)
# Increase for high-latency networks or large batch sizes
teradata.export.socket-receive-buffer-size=4194304

# Input stream buffer size in bytes (default: 1MB)
# Buffer for reading data from Teradata connections
teradata.export.input-buffer-size=1048576

# Maximum number of Arrow batches buffered per query (default: 100)
# Increase for larger data volumes, decrease to limit memory usage
teradata.export.buffer-queue-capacity=100

# Timeout in milliseconds for polling data from buffer (default: 500)
# Lower values improve responsiveness, higher values reduce CPU usage
teradata.export.page-poll-timeout-ms=500

# ============================================================
# Dynamic Filtering Settings
# ============================================================

# Timeout for waiting for dynamic filters to be collected
teradata.export.dynamic-filter-timeout=10s

# Enable or disable dynamic filter pushdown to Teradata
teradata.export.enable-dynamic-filtering=true

# Enable or disable aggregation pushdown to Teradata
teradata.export.enable-aggregation-pushdown=true

# Enable or disable Top-N pushdown to Teradata
teradata.export.enable-topn-pushdown=true

# ============================================================
# Security Settings
# ============================================================

# Security Token for Socket Channel Authentication
# This provides an extra layer of security between the Teradata UDF
# and the Trino bridge. Leave empty to disable token validation.
teradata.export.token=enterprise-secret-123

# Enforce proxy authentication strictly (default: true)
# When true, queries fail if QUERY_BAND cannot be set for the user
# When false, queries continue with a warning if proxy auth fails
teradata.export.enforce-proxy-authentication=true

# ============================================================
# UDF Location Settings
# ============================================================

# Database where ExportToTrino UDF is installed
# Default: TrinoExport (can be changed to td_syslib or any custom database)
teradata.export.udf-database=TrinoExport

# Name of the UDF function (default: ExportToTrino)
# Change if the UDF is registered with a different name
teradata.export.udf-name=ExportToTrino

# ============================================================
# Schema Settings
# ============================================================

# Default schemas to always include in schema list (comma-separated)
# These schemas appear even if not discoverable from Teradata metadata
teradata.export.default-schemas=TrinoExport,default

# ============================================================
# Logging Settings
# ============================================================

# Enable detailed debug logging for type conversion and data processing
# Warning: This generates verbose logs and should only be enabled for troubleshooting
teradata.export.enable-debug-logging=false
