# Trino Teradata Export Connector - Catalog Properties
#
# This file should be placed in Trino's catalog configuration directory
# (typically /etc/trino/catalog/ or $TRINO_HOME/etc/catalog/)
#
# Save as: tdexport.properties

# Connector name - must match the plugin name
connector.name=teradata-export

# ============================================================
# Teradata Connection Settings
# ============================================================

teradata.url=jdbc:teradata://192.168.137.129/DATABASE=TrinoExport
teradata.user=sysdba
teradata.password=sysdba

# Teradata server timezone offset (for TIME/TIMESTAMP conversion)
# Format: +/-HH:MM (e.g., -05:00 for EST, +08:00 for SGT)
teradata.timezone=-05:00

# ============================================================
# Network/Port Settings
# ============================================================

# Arrow Flight server port (for gRPC-based data transfer)
teradata.export.flight-port=50051

# Arrow Flight server bind address (network interface)
teradata.export.flight-bind-address=0.0.0.0

# Java Bridge server port (for direct TCP connections from Teradata AMPs)
teradata.export.bridge-port=9999

# Trino coordinator/worker address (used in single-worker mode)
teradata.export.trino-address=172.27.251.157

# Worker advertised addresses for NAT/multi-homed networks (optional)
# Use this when Teradata cannot reach workers via internal hostnames
teradata.export.worker-advertised-addresses=172.27.251.157:9999

# ============================================================
# Buffer/Performance Settings
# ============================================================

# Batch size (number of rows) to collect before sending to Trino
# Tune this based on network bandwidth and row width.
teradata.export.batch-size=100000

# TCP socket receive buffer size in bytes (default: 64MB)
teradata.export.socket-receive-buffer-size=67108864

# Input stream buffer size in bytes (default: 8MB)
teradata.export.input-buffer-size=8388608

# Maximum number of Arrow batches buffered per query (default: 100)
teradata.export.buffer-queue-capacity=100

# Timeout in milliseconds for polling data from buffer (default: 500)
teradata.export.page-poll-timeout-ms=500

# Enable compression for data transfer (equivalent to QueryGrid compression)
teradata.export.compression-enabled=true

# Number of parallel splits generated per Trino worker
# Increasing this improves parallel conversion throughput (CPU)
teradata.export.splits-per-worker=4

# ============================================================
# Dynamic Filtering Settings
# ============================================================

# Timeout for waiting for dynamic filters to be collected
teradata.export.dynamic-filter-timeout=10s

# Enable or disable dynamic filter pushdown to Teradata
teradata.export.enable-dynamic-filtering=true

# Enable or disable aggregation pushdown to Teradata
teradata.export.enable-aggregation-pushdown=true

# Enable or disable Top-N pushdown to Teradata
teradata.export.enable-topn-pushdown=true

# ============================================================
# Security Settings
# ============================================================

# Security Token for Socket Channel Authentication
teradata.export.token=enterprise-secret-123

# Enforce proxy authentication strictly (default: true)
teradata.export.enforce-proxy-authentication=true

# ============================================================
# UDF Location Settings
# ============================================================

# Database where ExportToTrino UDF is installed
teradata.export.udf-database=TrinoExport

# Name of the UDF function (default: ExportToTrino)
teradata.export.udf-name=ExportToTrino

# ============================================================
# Schema Settings
# ============================================================

# Default schemas to always include in schema list (comma-separated)
teradata.export.default-schemas=TrinoExport,default

# ============================================================
# Logging Settings
# ============================================================

# Enable detailed debug logging for troubleshooting
teradata.export.enable-debug-logging=false
